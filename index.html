<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Todo</h1>
      <div class="date-nav">
        <button class="nav-btn" onclick="changeDate(-1)">&#8249;</button>
        <div class="date-info">
          <span id="todayDate"></span>
          <span class="all-done-dot" id="allDoneDot" title="모두 완료!"></span>
        </div>
        <button class="nav-btn" onclick="changeDate(1)">&#8250;</button>
      </div>
    </div>

    <div class="input-row">
      <input type="text" id="todoInput" placeholder="새로운 할 일을 추가하세요..." />
      <button onclick="addTodo()">+ 추가</button>
    </div>

    <div class="filter-tabs">
      <button class="active" data-filter="all" onclick="setFilter('all', this)">전체</button>
      <button data-filter="active" onclick="setFilter('active', this)">진행중</button>
      <button data-filter="done" onclick="setFilter('done', this)">완료</button>
    </div>

    <div class="stats-card">
      <div class="stat">
        <div class="value" id="activeCount">0</div>
        <div class="label">진행중인 할 일</div>
      </div>
      <div class="stat">
        <div class="value" id="donePercent">0%</div>
        <div class="label">완료</div>
      </div>
      <div class="stat">
        <div class="value" id="totalCount">0개</div>
        <div class="label">전체</div>
      </div>
    </div>

    <ul class="todo-list" id="todoList"></ul>

    <!-- 축하 이미지 생성 버튼 (모두 완료 시 표시) -->
    <div class="celebration-bar" id="celebrationBar">
      <button class="celebration-btn" id="celebrationBtn" onclick="generateCelebration()">
        <span id="celebBtnIcon">🎉</span>
        <span id="celebBtnText">나노 바나나로 축하 이미지 생성</span>
      </button>
    </div>

    <!-- 달력 -->
    <div class="calendar-card" id="calendarCard">
      <div class="calendar-header">
        <button class="cal-nav-btn" onclick="changeCalendarMonth(-1)">&#8249;</button>
        <span id="calendarTitle"></span>
        <button class="cal-nav-btn" onclick="changeCalendarMonth(1)">&#8250;</button>
      </div>
      <div class="calendar-grid" id="calendarGrid"></div>
    </div>
  </div>
  <!-- 축하 이미지 모달 -->
  <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
    <div class="modal" onclick="event.stopPropagation()">
      <button class="modal-close" onclick="closeModal()">✕</button>
      <div class="modal-title">🎉 오늘의 할일 모두 완료!</div>
      <div class="modal-subtitle" id="modalSubtitle"></div>
      <div class="modal-image-wrap" id="modalImageWrap">
        <div class="modal-loading" id="modalLoading">
          <div class="spinner"></div>
          <p>나노 바나나가 이미지를 생성 중...</p>
        </div>
        <img class="modal-image" id="modalImage" src="" alt="축하 이미지" style="display:none" />
      </div>
      <a class="modal-download" id="modalDownload" download="celebration.png" style="display:none">⬇ 이미지 저장</a>
    </div>
  </div>

  <script src="/app.js"></script>
</body>
</html>
